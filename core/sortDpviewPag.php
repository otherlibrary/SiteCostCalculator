<?php	include('config.php');	require "langfinder.php";$finder = new LangFinder;$baseLang = $_GET['baseLang'];			$country = $_GET['country'];		$tbl_name="worth";	$adjacents = 1;	$query = "SELECT COUNT(*) as num FROM $tbl_name WHERE country = '$country' ORDER BY dpview DESC";	$total_pages = mysql_fetch_array(mysql_query($query));	$total_pages = $total_pages[num];	if ($total_pages > 64) {		$total_pages = 64;	}	$limit = 4;	$page = $_GET['page'];	if($page) 		$start = ($page - 1) * $limit;	else		$start = 0;	$sql = "SELECT * FROM $tbl_name WHERE country = '$country' ORDER BY dpview DESC LIMIT $start, $limit";	$result = mysql_query($sql);		/* Setup page vars for display. */	if ($page == 0) $page = 1;	$prev = $page - 1;	$next = $page + 1;	$lastpage = ceil($total_pages/$limit);	$lpm1 = $lastpage - 1;	$pagination = "";	if($lastpage > 1)	{			$pagination .= "<div class=\"pagination\">";		if ($page > 1) 			$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$prev."');\"><</a>";		else			$pagination.= "<span class=\"disabled\"><</span>";			if ($lastpage < 7 + ($adjacents * 2))		{				for ($counter = 1; $counter <= $lastpage; $counter++)			{				if ($counter == $page)					$pagination.= "<span class=\"current\">$counter</span>";				else					$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$counter."');\">$counter</a>";								}		}		elseif($lastpage > 5 + ($adjacents * 2))	//enough pages to hide some		{			if($page < 1 + ($adjacents * 2))					{				for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)				{					if ($counter == $page)						$pagination.= "<span class=\"current\">$counter</span>";					else						$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$counter."');\">$counter</a>";									}				$pagination.= "...";				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$lpm1."');\">$lpm1</a>";				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$lastpage."');\">$lastpage</a>";					}			elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))			{				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '1');\">1</a>";				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '2');\">2</a>";				$pagination.= "...";				for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)				{					if ($counter == $page)						$pagination.= "<span class=\"current\">$counter</span>";					else						$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$counter."');\">$counter</a>";									}				$pagination.= "...";				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$lpm1."');\">$lpm1</a>";				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$lastpage."');\">$lastpage</a>";					}			else			{				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '1');\">1</a>";				$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '2');\">2</a>";				$pagination.= "...";				for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)				{					if ($counter == $page)						$pagination.= "<span class=\"current\">$counter</span>";					else						$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$counter."');\">$counter</a>";									}			}		}		if ($page < $counter - 1) 			$pagination.= "<a href=\"#\" onclick=\"sortDpviewPag('".$country."', '".$next."');\">></a>";		else			$pagination.= "<span class=\"disabled\">></span>";		$pagination.= "</div>\n";	}		if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet { $ip=$_SERVER['HTTP_CLIENT_IP']; } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy { $ip=$_SERVER['HTTP_X_FORWARDED_FOR']; } else { $ip=$_SERVER['REMOTE_ADDR']; }require "translate.php";$t1 = "Popular Sites in ".$country;if (!$baseLang) {	require_once('geoip.inc');	$open = geoip_open("GeoIP.dat", GEOIP_STANDARD);	$code = geoip_country_code_by_addr($open, $ip);	geoip_close($open);		$googleLang = $finder->find($code);		if (!$googleLang) {		$googleLang = "en";	}		$lang = $googleLang;} else {	$lang = $finder->find($baseLang);}$tr = new Google_Translate_API;	$t1_ = $tr->translate($t1, 'en', $lang);$t2 = "daily visits";		 	$t2_ = $tr->translate($t2, 'en', $lang);	if ($t1_) {	$t1  = $t1_;}if ($t2_) {	$t2  = $t2_;}	$res = "<center><span id='stitle'><b>".$t1."</b></span><br><table>";while ($row = mysql_fetch_assoc($result)) {	$domain = $row[domain];		 $dpviewInt = intval($row[dpview]);		 $dpviewInt = $dpviewInt / 10;		 $dpviewInt = round($dpviewInt);		 if ($dpviewInt < 20) {		 	$dp = '< 20';		 } else {		 	$dp = number_format($dpviewInt, 0, ',', ',');		 }	$res = $res."<translate><td align='center'><a style=\"text-decoration:none;\" href='#' onclick=loadS('".$domain."');>".$domain."		   <br><img height=\"90\" style=\"border:none;\" width=\"120\" src=\"http://open.thumbshots.org/image.pxf?url=".$domain."\" title='".$dp." ".$t2."' alt='".$dp." ".$t2."'></a></td></translate>";}mysql_close($con);$res = $res."</table></center>";echo $res."<center>".$pagination."</center>";?>